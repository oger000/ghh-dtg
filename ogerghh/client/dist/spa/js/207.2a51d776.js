(self["webpackChunkghh_navi"]=self["webpackChunkghh_navi"]||[]).push([[207],{6878:(e,t,l)=>{"use strict";l.d(t,{Z:()=>s});var a=l(52),n=l.n(a),r=l(6584);const i=n().create({baseURL:(0,r.MT)(),timeout:2500}),s=i},7207:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>he});var a=l(3673);function n(e,t,l,n,r,i){const s=(0,a.up)("GhhDetailsGrid"),o=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(s,(0,a.dG)(e.$props,{columns:n.columns,detailUrl:n.detailUrl,mvagUrl:n.mvagUrl}),null,16,["columns","detailUrl","mvagUrl"])])),_:1})}var r=l(2323),i=l(8880);const s={class:"row q-gutter-md"},o={class:"q-pa-xs col-xs-12 col-sm-12col-md-12"},d={class:"text-left",style:{width:"5%"}},u={class:"text-left",style:{width:"30%"}},c={class:"text-left",style:{width:"30%"}},g={class:"text-center",style:{width:"5%"}},w={class:"text-right",style:{width:"10%"}},m={class:"text-right",style:{width:"10%"}},v={class:"text-right",style:{width:"10%"}},h={colspan:"6"},f=(0,a.Wm)("td",{class:"text-left"},"Finanzjahr",-1),p={class:"text-right"},b={class:"text-right"},_={class:"text-right"},x={class:"text-right"},z={class:"text-right"},W={class:"text-right"},y=(0,a.Wm)("td",{class:"text-left"},"Rechnungsabschluss",-1),S={class:"text-right"},V={class:"text-right"},j={class:"text-right"},k={class:"text-right"},A={class:"text-right"},q={class:"text-right"},U=(0,a.Wm)("td",{class:"text-left"},"Voranschlag",-1),T={class:"text-right"},F={class:"text-right"},O={class:"text-right"},C={class:"text-right"},Z={class:"text-right"},K={class:"text-right"},H={colspan:"6"},$={class:"text-left"},M={class:"text-left"},Q={class:"text-left"},P={class:"text-left"},R={class:"text-left"},G={class:"text-left"},L={class:"text-left"},N={class:"text-left"},D={class:"text-left"},J=(0,a.Wm)("td",{class:"text-left"}," ",-1);function B(e,t,l,n,B,I){const E=(0,a.up)("q-btn"),X=(0,a.up)("q-toolbar-title"),Y=(0,a.up)("q-toolbar"),ee=(0,a.up)("q-select"),te=(0,a.up)("q-icon"),le=(0,a.up)("q-input"),ae=(0,a.up)("q-markup-table"),ne=(0,a.up)("q-table");return(0,a.wg)(),(0,a.j4)("div",null,[(0,a.Wm)(Y,{class:"bg-primary text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{flat:"",dense:"",round:"",fab:"",icon:"arrow_back",onClick:t[1]||(t[1]=t=>e.$router.back())}),(0,a.Wm)(X,{class:"text-center"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e.mainTitle),1)])),_:1})])),_:1}),(0,a.Wm)("div",s,[(0,a.Wm)(ee,{grid:"",filled:"",clearable:"","use-input":"",modelValue:e.selectAnsatzValue,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.selectAnsatzValue=t),e.onSelectAnsatzUpdate],label:"Ansatzfilter",options:e.selectAnsatzOptions,onFilter:e.onSelectAnsatzFilter,style:{width:"250px"}},null,8,["modelValue","options","onFilter","onUpdate:modelValue"]),(0,a.Wm)(ee,{filled:"",clearable:"","use-input":"",modelValue:e.selectKontoValue,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.selectKontoValue=t),e.onSelectKontoUpdate],label:"Kontofilter",options:e.selectKontoOptions,onFilter:e.onSelectKontoFilter,style:{width:"250px"}},null,8,["modelValue","options","onFilter","onUpdate:modelValue"]),(0,a.Wm)(ee,{filled:"",clearable:"","use-input":"",modelValue:e.selectMvagValue,"onUpdate:modelValue":[t[4]||(t[4]=t=>e.selectMvagValue=t),e.onSelectMvagUpdate],label:"MVAG-Filter",options:e.selectMvagOptions,onFilter:e.onSelectMvagFilter,style:{width:"250px"}},null,8,["modelValue","options","onFilter","onUpdate:modelValue"]),(0,a.Wm)(le,{"bottom-slots":"",modelValue:e.filterText,"onUpdate:modelValue":t[7]||(t[7]=t=>e.filterText=t),label:"Textfilter",dense:"",onKeydown:t[8]||(t[8]=(0,i.D2)((0,i.iM)((t=>e.onFilterTextApply(e.filterText)),["prevent"]),["enter"])),filled:""},{append:(0,a.w5)((()=>[""!==e.filterText?((0,a.wg)(),(0,a.j4)(te,{key:0,name:"close",onClick:t[5]||(t[5]=t=>e.filterText=""),class:"cursor-pointer"})):(0,a.kq)("",!0)])),after:(0,a.w5)((()=>[(0,a.Wm)(E,{round:"",dense:"",flat:"",icon:"send",onClick:t[6]||(t[6]=t=>e.onFilterTextApply(e.filterText))})])),_:1},8,["modelValue"]),(0,a.Wm)(ee,{filled:"",modelValue:e.selectSort,"onUpdate:modelValue":[t[9]||(t[9]=t=>e.selectSort=t),e.onSelectSort],"map-options":"",label:"Sortierung",options:[{label:"Ansatz, Konto",value:"ansatz"},{label:"Konto, Ansatz",value:"konto"}],style:{width:"200px"}},null,8,["modelValue","onUpdate:modelValue"])]),(0,a.Wm)(ne,{grid:"","grid-header":"",dense:"",rows:e.tableData,columns:e.tableColumns,"row-key":"iid",filter:e.tableFilter,pagination:e.serverPagination,"onUpdate:pagination":t[10]||(t[10]=t=>e.serverPagination=t),onRequest:e.fetchRowsAndTotal,"binary-state-sort":""},{item:(0,a.w5)((t=>[(0,a.Wm)("div",o,[(0,a.Wm)(ae,{separator:"cell"},{default:(0,a.w5)((()=>[(0,a.Wm)("tbody",null,[(0,a.Wm)("tr",null,[(0,a.Wm)("td",d,[(0,a.Wm)(E,{round:"",dense:"",icon:-1===e.expanded1.indexOf(t.row.iid)?"add":"remove",onClick:l=>-1===e.expanded1.indexOf(t.row.iid)?e.expanded1.push(t.row.iid):e.expanded1.splice(e.expanded1.indexOf(t.row.iid),1)},null,8,["icon","onClick"])]),(0,a.Wm)("td",u,(0,r.zw)(t.row.ansatz_plus_text),1),(0,a.Wm)("td",c,(0,r.zw)(t.row.konto_plus_text),1),(0,a.Wm)("td",g,(0,r.zw)(t.row.verguetung_text),1),(0,a.Wm)("td",w,(0,r.zw)(t.row.wert1),1),(0,a.Wm)("td",m,(0,r.zw)(t.row.wert2),1),(0,a.Wm)("td",v,(0,r.zw)(t.row.wert3),1)]),(0,a.Wm)("tr",{hidden:-1===e.expanded1.indexOf(t.row.iid)},[(0,a.Wm)("td",h,[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[(0,a.Wm)("tbody",null,[(0,a.Wm)("tr",null,[f,(0,a.Wm)("td",p,(0,r.zw)(t.row.finanzjahr),1),(0,a.Wm)("td",b,(0,r.zw)(t.row.finanzjahr-1),1),(0,a.Wm)("td",_,(0,r.zw)(t.row.finanzjahr-2),1),(0,a.Wm)("td",x,(0,r.zw)(t.row.finanzjahr-3),1),(0,a.Wm)("td",z,(0,r.zw)(t.row.finanzjahr-4),1),(0,a.Wm)("td",W,(0,r.zw)(t.row.finanzjahr-5),1)]),(0,a.Wm)("tr",null,[y,(0,a.Wm)("td",S,(0,r.zw)(t.row.wert_ra_vj0),1),(0,a.Wm)("td",V,(0,r.zw)(t.row.wert_ra_vj1),1),(0,a.Wm)("td",j,(0,r.zw)(t.row.wert_ra_vj2),1),(0,a.Wm)("td",k,(0,r.zw)(t.row.wert_ra_vj3),1),(0,a.Wm)("td",A,(0,r.zw)(t.row.wert_ra_vj4),1),(0,a.Wm)("td",q,(0,r.zw)(t.row.wert_ra_vj5),1)]),(0,a.Wm)("tr",null,[U,(0,a.Wm)("td",T,(0,r.zw)(t.row.wert_va_vj0),1),(0,a.Wm)("td",F,(0,r.zw)(t.row.wert_va_vj1),1),(0,a.Wm)("td",O,(0,r.zw)(t.row.wert_va_vj2),1),(0,a.Wm)("td",C,(0,r.zw)(t.row.wert_va_vj3),1),(0,a.Wm)("td",Z,(0,r.zw)(t.row.wert_va_vj4),1),(0,a.Wm)("td",K,(0,r.zw)(t.row.wert_va_vj5),1)])])])),_:2},1024)])],8,["hidden"]),(0,a.Wm)("tr",{hidden:-1===e.expanded1.indexOf(t.row.iid)},[(0,a.Wm)("td",H,[(0,a.Wm)(ae,null,{default:(0,a.w5)((()=>[(0,a.Wm)("tbody",null,[(0,a.Wm)("tr",null,[(0,a.Wm)("td",$,(0,r.zw)(t.row.ansatz1_plus_text),1),(0,a.Wm)("td",M,(0,r.zw)(t.row.konto1_plus_text),1),(0,a.Wm)("td",Q,(0,r.zw)(t.row.mvag1_plus_text),1)]),(0,a.Wm)("tr",null,[(0,a.Wm)("td",P,(0,r.zw)(t.row.ansatz2_plus_text),1),(0,a.Wm)("td",R,(0,r.zw)(t.row.konto2_plus_text),1),(0,a.Wm)("td",G,(0,r.zw)(t.row.mvag2_plus_text),1)]),(0,a.Wm)("tr",null,[(0,a.Wm)("td",L,(0,r.zw)(t.row.ansatz3_plus_text),1),(0,a.Wm)("td",N,(0,r.zw)(t.row.konto3_plus_text),1),(0,a.Wm)("td",D,(0,r.zw)(t.row.id_xhh),1),J])])])),_:2},1024)])],8,["hidden"])])])),_:2},1024)])])),_:1},8,["rows","columns","filter","pagination","onRequest"])])}l(7098),l(71);var I=l(1959),E=l(6878),X=l(6584);const Y=(0,a.aZ)({name:"GhhDetailsGrid",props:{gemeinde:String,gkz:String,gemeinden_name:String,va_ra:String,finanzjahr:String,quartal:String,periode:String,nva:String,vrv:String,gemeinde_berichte_name:String,bestandteil:String,vrv_bestandteile_name:String,columns:Array,detailUrl:String,mvagUrl:String},setup(e){const t=(0,I.iH)(`${e.gemeinden_name} / ${e.gemeinde_berichte_name} / ${e.vrv_bestandteile_name}`),l=(0,I.iH)([]),n=(0,I.iH)(""),r=(0,I.iH)(!1),i=(0,I.iH)({sortBy:"",descending:!1,page:1,rowsPerPage:30,rowsNumber:1});async function s(t){const{page:a,rowsPerPage:n,sortBy:s,descending:d}=t.pagination,u=(0,X.Rw)(t);u.baseFilter={gkz:e.gkz,va_ra:e.va_ra,finanzjahr:e.finanzjahr,quartal:e.quartal,nva:e.nva,vrv:e.vrv},u.filter={mvag:o.value?o.value.value:void 0,ansatz:w.value?w.value.value:void 0,konto:p.value?p.value.value:void 0,filterText:S.value?S.value:void 0},u.sort=[[j.value.value,"ASC"]];try{r.value=!0;const{data:t}=await E.Z.post(`api/navi/${e.detailUrl}`,u);l.value=t.rows,i.value.rowsNumber=t.total}catch(c){(0,X.s3)(c)}i.value.page=a,i.value.rowsPerPage=n,i.value.sortBy=s,i.value.descending=d,r.value=!1}(0,a.bv)((()=>{s({pagination:i.value})}));const o=(0,I.iH)(null),d=(0,I.iH)(null);let u=null;async function c(t,l,a){if(null!==u)l((()=>{const e=t.toLowerCase();d.value=u.filter((t=>t.label.toLowerCase().indexOf(e)>-1))}));else try{const{data:t}=await E.Z.post(`api/navi/select_${e.mvagUrl}`,{vrv:e.vrv});l((()=>{d.value=t.rows,u=[...t.rows]}))}catch(n){a(),(0,X.s3)(n)}}async function g(e){n.value="mvag: "+JSON.stringify(e)}const w=(0,I.iH)(null),m=(0,I.iH)(null);let v=null;async function h(t,l,a){if(null!==v)l((()=>{const e=t.toLowerCase();m.value=v.filter((t=>t.label.toLowerCase().indexOf(e)>-1))}));else try{const{data:t}=await E.Z.post("api/navi/select_ansatz",{vrv:e.vrv});l((()=>{m.value=t.rows,v=[...t.rows]}))}catch(n){a(),(0,X.s3)(n)}}async function f(e){n.value="ansatz: "+JSON.stringify(e)}const p=(0,I.iH)(null),b=(0,I.iH)(null);let _=null;async function x(t,l,a){if(null!==_)l((()=>{const e=t.toLowerCase();b.value=_.filter((t=>t.label.toLowerCase().indexOf(e)>-1))}));else try{const{data:t}=await E.Z.post("api/navi/select_konto",{vrv:e.vrv});l((()=>{b.value=t.rows,_=[...t.rows]}))}catch(n){a(),(0,X.s3)(n)}}async function z(e){n.value="konto: "+JSON.stringify(e)}const W=(0,I.iH)([]),y=(0,I.iH)([]),S=(0,I.iH)("");async function V(e){n.value="text: "+JSON.stringify(e)}const j=(0,I.iH)("ansatz");async function k(e){n.value="sort: "+JSON.stringify(e)}return{mainTitle:t,loading:r,serverPagination:i,tableColumns:e.columns,tableData:l,fetchRowsAndTotal:s,tableFilter:n,selectMvagValue:o,selectMvagOptions:d,onSelectMvagFilter:c,onSelectMvagUpdate:g,selectAnsatzValue:w,selectAnsatzOptions:m,onSelectAnsatzFilter:h,onSelectAnsatzUpdate:f,selectKontoValue:p,selectKontoOptions:b,onSelectKontoFilter:x,onSelectKontoUpdate:z,expanded1:W,expanded2:y,filterText:S,onFilterTextApply:V,selectSort:j,onSelectSort:k}}});var ee=l(9570),te=l(8240),le=l(3747),ae=l(4157),ne=l(4842),re=l(4554),ie=l(8089),se=l(151),oe=l(5589),de=l(5869),ue=l(481),ce=l(7518),ge=l.n(ce);Y.render=B;const we=Y;ge()(Y,"components",{QToolbar:ee.Z,QBtn:te.Z,QToolbarTitle:le.Z,QSelect:ae.Z,QInput:ne.Z,QIcon:re.Z,QTable:ie.Z,QCard:se.Z,QCardSection:oe.Z,QSeparator:de.Z,QMarkupTable:ue.Z});const me={components:{GhhDetailsGrid:we},props:{gemeinde:String,gkz:String,gemeinden_name:String,va_ra:String,finanzjahr:String,quartal:String,periode:String,nva:String,vrv:String,gemeinde_berichte_name:String,bestandteil:String,vrv_bestandteile_name:String},setup(e){let t=[],l="",a="";switch(e.bestandteil){case"ergebnishaushalt":t=[{name:"dummy1",label:"[+]",field:"",align:"left",required:!1,sortable:!1,style:"width:5%"},{name:"ansatz",label:"Ansatz",field:"ansatz_plus_text",align:"left",required:!0,sortable:!1,style:"width:30%"},{name:"konto",label:"Konto",field:"konto_plus_text",align:"left",required:!0,sortable:!1,style:"width:30%"},{name:"verguetung",label:"Verg",field:"verguetung_text",align:"center",required:!0,sortable:!1,style:"width:5%"}],"VA"===e.va_ra?t=t.concat([{name:"wert1",label:`Voranschlag ${e.finanzjahr}`,field:"wert1",align:"right",sortable:!1,style:"width:10%"},{name:"wert2",label:"Voranschlag "+(e.finanzjahr-1),field:"wert2",align:"right",sortable:!1,style:"width:10%"},{name:"wert3",label:"Abschluss "+(e.finanzjahr-2),field:"wert3",align:"right",sortable:!1,style:"width:10%"}]):"RA"===e.va_ra&&(t=t.concat([{name:"wert1",label:`Abschluss ${e.finanzjahr}`,field:"wert1",align:"right",sortable:!1,style:"width:10%"},{name:"wert2",label:`Voranschlag ${e.finanzjahr}`,align:"right",sortable:!1,style:"width:10%"},{name:"wert3",label:"Abweichung",field:"wert3",align:"right",sortable:!1,style:"width:10%"}])),l="ehh_details",a="mvag_ehh";break;case"finanzierungshaushalt":t=[{name:"dummy1",label:"[+]",field:"",align:"left",required:!1,sortable:!1},{name:"ansatz",label:"Ansatz",field:"ansatz_plus_text",align:"left",required:!0,sortable:!1},{name:"konto",label:"Konto",field:"konto_plus_text",align:"left",required:!0,sortable:!1},{name:"verguetung",label:"Verg",field:"verguetung_text",align:"center",required:!0,sortable:!1}],"VA"===e.va_ra?t=t.concat([{name:"wert1",label:`Voranschlag ${e.finanzjahr}`,field:"wert1",align:"right",sortable:!1},{name:"wert2",label:"Voranschlag "+(e.finanzjahr-1),field:"wert2",align:"right",sortable:!1},{name:"wert3",label:"Abschluss "+(e.finanzjahr-2),field:"wert3",align:"right",sortable:!1}]):"RA"===e.va_ra&&(t=t.concat([{name:"wert1",label:`Abschluss ${e.finanzjahr}`,field:"wert1",align:"right",sortable:!1},{name:"wert2",label:`Voranschlag ${e.finanzjahr}`,align:"right",sortable:!1},{name:"wert3",label:"Abweichung",field:"wert3",align:"right",sortable:!1}])),l="fhh_details",a="mvag_fhh";break;case"vermoegenshaushalt":t=[{name:"dummy1",label:"[+]",field:"",align:"left",required:!1,sortable:!1},{name:"ansatz",label:"Ansatz",field:"ansatz_plus_text",align:"left",required:!0,sortable:!1},{name:"konto",label:"Konto",field:"konto_plus_text",align:"left",required:!0,sortable:!1},{name:"verguetung",label:"",field:"verguetung_text",align:"center",required:!0,sortable:!1},{name:"wert1",label:`Wert 01.01.${e.finanzjahr}`,field:"wert1",align:"right",sortable:!1},{name:"wert2",label:`Wert 31.12.${e.finanzjahr}`,field:"wert2",align:"right",sortable:!1},{name:"wert3",label:"Veränderung",field:"wert3",align:"right",sortable:!1}],l="vhh_details",a="mvag_vhh"}return{columns:t,detailUrl:l,mvagUrl:a}}};var ve=l(4379);me.render=n;const he=me;ge()(me,"components",{QPage:ve.Z})}}]);