(self["webpackChunkghh_navi"]=self["webpackChunkghh_navi"]||[]).push([[69],{6878:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var l=a(52),n=a.n(l),r=a(6584);const i=n().create({baseURL:(0,r.MT)(),timeout:2500}),o=i},2069:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>wt});var l=a(3673);function n(t,e,a,n,r,i){const o=(0,l.up)("GhhDetailsGrid"),s=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(s,null,{default:(0,l.w5)((()=>[(0,l.Wm)(o,(0,l.dG)(t.$props,{columns:n.columns,detailUrl:n.detailUrl,mvagUrl:n.mvagUrl}),null,16,["columns","detailUrl","mvagUrl"])])),_:1})}var r=a(2323),i=a(8880);const o={class:"row q-gutter-md"},s={class:"q-pa-xs col-xs-12 col-sm-12col-md-12"},d={class:"text-left",style:{width:"5%"}},u={class:"text-left",style:{width:"30%"}},c={class:"text-left",style:{width:"30%"}},m={class:"text-right",style:{width:"10%"}},g={class:"text-right",style:{width:"10%"}},w={class:"text-right",style:{width:"10%"}},v={colspan:"6"},p=(0,l.Wm)("td",{class:"text-left"},"Finanzjahr",-1),f={class:"text-right"},_={class:"text-right"},h={class:"text-right"},x={class:"text-right"},b={class:"text-right"},z={class:"text-right"},W=(0,l.Wm)("td",{class:"text-left"},"Rechnungsabschluss",-1),S={class:"text-right"},y={class:"text-right"},j={class:"text-right"},k={class:"text-right"},F={class:"text-right"},U={class:"text-right"},V=(0,l.Wm)("td",{class:"text-left"},"Voranschlag",-1),q={class:"text-right"},T={class:"text-right"},A={class:"text-right"},D={class:"text-right"},O={class:"text-right"},Z={class:"text-right"},C={colspan:"6"},G={class:"text-left"},H={class:"text-left"},K={class:"text-left"},M={class:"text-left"},L={class:"text-left"},Q={class:"text-left"},P={class:"text-left"},R={class:"text-left"},$=(0,l.Wm)("td",{class:"text-left"},"Â ",-1);function E(t,e,a,n,E,N){const B=(0,l.up)("q-btn"),J=(0,l.up)("q-toolbar-title"),I=(0,l.up)("q-toolbar"),X=(0,l.up)("q-select"),Y=(0,l.up)("q-icon"),tt=(0,l.up)("q-input"),et=(0,l.up)("q-markup-table"),at=(0,l.up)("q-table");return(0,l.wg)(),(0,l.j4)("div",null,[(0,l.Wm)(I,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(B,{flat:"",dense:"",round:"",fab:"",icon:"arrow_back",onClick:e[1]||(e[1]=e=>t.$router.back())}),(0,l.Wm)(J,{class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(t.mainTitle),1)])),_:1})])),_:1}),(0,l.Wm)("div",o,[(0,l.Wm)(X,{grid:"",filled:"",clearable:"","use-input":"",modelValue:t.selectAnsatzValue,"onUpdate:modelValue":[e[2]||(e[2]=e=>t.selectAnsatzValue=e),t.onSelectAnsatzUpdate],label:"Ansatzfilter",options:t.selectAnsatzOptions,onFilter:t.onSelectAnsatzFilter,style:{width:"250px"}},null,8,["modelValue","options","onFilter","onUpdate:modelValue"]),(0,l.Wm)(X,{filled:"",clearable:"","use-input":"",modelValue:t.selectKontoValue,"onUpdate:modelValue":[e[3]||(e[3]=e=>t.selectKontoValue=e),t.onSelectKontoUpdate],label:"Kontofilter",options:t.selectKontoOptions,onFilter:t.onSelectKontoFilter,style:{width:"250px"}},null,8,["modelValue","options","onFilter","onUpdate:modelValue"]),(0,l.Wm)(X,{filled:"",clearable:"","use-input":"",modelValue:t.selectMvagValue,"onUpdate:modelValue":[e[4]||(e[4]=e=>t.selectMvagValue=e),t.onSelectMvagUpdate],label:"MVAG-Filter",options:t.selectMvagOptions,onFilter:t.onSelectMvagFilter,style:{width:"250px"}},null,8,["modelValue","options","onFilter","onUpdate:modelValue"]),(0,l.Wm)(tt,{"bottom-slots":"",modelValue:t.filterText,"onUpdate:modelValue":e[7]||(e[7]=e=>t.filterText=e),label:"Textfilter",dense:"",onKeydown:e[8]||(e[8]=(0,i.D2)((0,i.iM)((e=>t.onFilterTextApply(t.filterText)),["prevent"]),["enter"]))},{append:(0,l.w5)((()=>[""!==t.filterText?((0,l.wg)(),(0,l.j4)(Y,{key:0,name:"close",onClick:e[5]||(e[5]=e=>t.filterText=""),class:"cursor-pointer"})):(0,l.kq)("",!0)])),after:(0,l.w5)((()=>[(0,l.Wm)(B,{round:"",dense:"",flat:"",icon:"send",onClick:e[6]||(e[6]=e=>t.onFilterTextApply(t.filterText))})])),_:1},8,["modelValue"])]),(0,l.Wm)(at,{grid:"",dense:"",rows:t.tableData,columns:t.tableColumns,"row-key":"iid",filter:t.tableFilter,pagination:t.serverPagination,"onUpdate:pagination":e[9]||(e[9]=e=>t.serverPagination=e),onRequest:t.fetchRowsAndTotal,"binary-state-sort":""},{item:(0,l.w5)((e=>[(0,l.Wm)("div",s,[(0,l.Wm)(et,{separator:"cell"},{default:(0,l.w5)((()=>[(0,l.Wm)("tbody",null,[(0,l.Wm)("tr",null,[(0,l.Wm)("td",d,[(0,l.Wm)(B,{round:"",dense:"",icon:-1===t.expanded1.indexOf(e.row.iid)?"add":"remove",onClick:a=>-1===t.expanded1.indexOf(e.row.iid)?t.expanded1.push(e.row.iid):t.expanded1.splice(t.expanded1.indexOf(e.row.iid),1)},null,8,["icon","onClick"])]),(0,l.Wm)("td",u,(0,r.zw)(e.row.ansatz_plus_text),1),(0,l.Wm)("td",c,(0,r.zw)(e.row.konto_plus_text),1),(0,l.Wm)("td",m,(0,r.zw)(e.row.wert1),1),(0,l.Wm)("td",g,(0,r.zw)(e.row.wert2),1),(0,l.Wm)("td",w,(0,r.zw)(e.row.wert3),1)]),(0,l.Wm)("tr",{hidden:-1===t.expanded1.indexOf(e.row.iid)},[(0,l.Wm)("td",v,[(0,l.Wm)(et,null,{default:(0,l.w5)((()=>[(0,l.Wm)("tbody",null,[(0,l.Wm)("tr",null,[p,(0,l.Wm)("td",f,(0,r.zw)(e.row.finanzjahr),1),(0,l.Wm)("td",_,(0,r.zw)(e.row.finanzjahr-1),1),(0,l.Wm)("td",h,(0,r.zw)(e.row.finanzjahr-2),1),(0,l.Wm)("td",x,(0,r.zw)(e.row.finanzjahr-3),1),(0,l.Wm)("td",b,(0,r.zw)(e.row.finanzjahr-4),1),(0,l.Wm)("td",z,(0,r.zw)(e.row.finanzjahr-5),1)]),(0,l.Wm)("tr",null,[W,(0,l.Wm)("td",S,(0,r.zw)(e.row.wert_ra_vj0),1),(0,l.Wm)("td",y,(0,r.zw)(e.row.wert_ra_vj1),1),(0,l.Wm)("td",j,(0,r.zw)(e.row.wert_ra_vj2),1),(0,l.Wm)("td",k,(0,r.zw)(e.row.wert_ra_vj3),1),(0,l.Wm)("td",F,(0,r.zw)(e.row.wert_ra_vj4),1),(0,l.Wm)("td",U,(0,r.zw)(e.row.wert_ra_vj5),1)]),(0,l.Wm)("tr",null,[V,(0,l.Wm)("td",q,(0,r.zw)(e.row.wert_va_vj0),1),(0,l.Wm)("td",T,(0,r.zw)(e.row.wert_va_vj1),1),(0,l.Wm)("td",A,(0,r.zw)(e.row.wert_va_vj2),1),(0,l.Wm)("td",D,(0,r.zw)(e.row.wert_va_vj3),1),(0,l.Wm)("td",O,(0,r.zw)(e.row.wert_va_vj4),1),(0,l.Wm)("td",Z,(0,r.zw)(e.row.wert_va_vj5),1)])])])),_:2},1024)])],8,["hidden"]),(0,l.Wm)("tr",{hidden:-1===t.expanded1.indexOf(e.row.iid)},[(0,l.Wm)("td",C,[(0,l.Wm)(et,null,{default:(0,l.w5)((()=>[(0,l.Wm)("tbody",null,[(0,l.Wm)("tr",null,[(0,l.Wm)("td",G,(0,r.zw)(e.row.ansatz1_plus_text),1),(0,l.Wm)("td",H,(0,r.zw)(e.row.konto1_plus_text),1),(0,l.Wm)("td",K,(0,r.zw)(e.row.mvag1_plus_text),1)]),(0,l.Wm)("tr",null,[(0,l.Wm)("td",M,(0,r.zw)(e.row.ansatz2_plus_text),1),(0,l.Wm)("td",L,(0,r.zw)(e.row.konto2_plus_text),1),(0,l.Wm)("td",Q,(0,r.zw)(e.row.mvag2_plus_text),1)]),(0,l.Wm)("tr",null,[(0,l.Wm)("td",P,(0,r.zw)(e.row.ansatz3_plus_text),1),(0,l.Wm)("td",R,(0,r.zw)(e.row.konto3_plus_text),1),$])])])),_:2},1024)])],8,["hidden"])])])),_:2},1024)])])),_:1},8,["rows","columns","filter","pagination","onRequest"])])}a(71);var N=a(1959),B=a(6878),J=a(6584);const I=(0,l.aZ)({name:"GhhDetailsGrid",props:{gemeinde:String,gkz:String,gemeinden_name:String,va_ra:String,finanzjahr:String,quartal:String,periode:String,nva:String,vrv:String,gemeinde_berichte_name:String,bestandteil:String,vrv_bestandteile_name:String,columns:Array,detailUrl:String,mvagUrl:String},setup(t){const e=(0,N.iH)(`${t.gemeinden_name} / ${t.gemeinde_berichte_name} / ${t.vrv_bestandteile_name}`),a=(0,N.iH)([]),n=(0,N.iH)(""),r=(0,N.iH)(!1),i=(0,N.iH)({sortBy:"iid",descending:!1,page:1,rowsPerPage:30,rowsNumber:1});async function o(e){const{page:l,rowsPerPage:n,sortBy:o,descending:d}=e.pagination,u=(0,J.Rw)(e);u.baseFilter={gkz:t.gkz,va_ra:t.va_ra,finanzjahr:t.finanzjahr,quartal:t.quartal,nva:t.nva,vrv:t.vrv},u.filter={mvag:s.value?s.value.value:void 0,ansatz:g.value?g.value.value:void 0,konto:_.value?_.value.value:void 0,filterText:y.value?y.value:void 0};try{r.value=!0;const{data:e}=await B.Z.post(`api/navi/${t.detailUrl}`,u);a.value=e.rows,i.value.rowsNumber=e.total}catch(c){(0,J.s3)(c)}i.value.page=l,i.value.rowsPerPage=n,i.value.sortBy=o,i.value.descending=d,r.value=!1}(0,l.bv)((()=>{o({pagination:i.value})}));const s=(0,N.iH)(null),d=(0,N.iH)(null);let u=null;async function c(e,a,l){if(null!==u)a((()=>{const t=e.toLowerCase();d.value=u.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}));else try{const{data:e}=await B.Z.post(`api/navi/select_${t.mvagUrl}`,{vrv:t.vrv});a((()=>{d.value=e.rows,u=[...e.rows]}))}catch(n){l(),(0,J.s3)(n)}}async function m(t){n.value="mvag: "+JSON.stringify(t)}const g=(0,N.iH)(null),w=(0,N.iH)(null);let v=null;async function p(e,a,l){if(null!==v)a((()=>{const t=e.toLowerCase();w.value=v.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}));else try{const{data:e}=await B.Z.post("api/navi/select_ansatz",{vrv:t.vrv});a((()=>{w.value=e.rows,v=[...e.rows]}))}catch(n){l(),(0,J.s3)(n)}}async function f(t){n.value="ansatz: "+JSON.stringify(t)}const _=(0,N.iH)(null),h=(0,N.iH)(null);let x=null;async function b(e,a,l){if(null!==x)a((()=>{const t=e.toLowerCase();h.value=x.filter((e=>e.label.toLowerCase().indexOf(t)>-1))}));else try{const{data:e}=await B.Z.post("api/navi/select_konto",{vrv:t.vrv});a((()=>{h.value=e.rows,x=[...e.rows]}))}catch(n){l(),(0,J.s3)(n)}}async function z(t){n.value="konto: "+JSON.stringify(t)}const W=(0,N.iH)([]),S=(0,N.iH)([]),y=(0,N.iH)("");async function j(t){n.value="text: "+JSON.stringify(t)}return{mainTitle:e,loading:r,serverPagination:i,tableColumns:t.columns,tableData:a,fetchRowsAndTotal:o,tableFilter:n,selectMvagValue:s,selectMvagOptions:d,onSelectMvagFilter:c,onSelectMvagUpdate:m,selectAnsatzValue:g,selectAnsatzOptions:w,onSelectAnsatzFilter:p,onSelectAnsatzUpdate:f,selectKontoValue:_,selectKontoOptions:h,onSelectKontoFilter:b,onSelectKontoUpdate:z,expanded1:W,expanded2:S,filterText:y,onFilterTextApply:j}}});var X=a(9570),Y=a(8240),tt=a(3747),et=a(4157),at=a(4842),lt=a(4554),nt=a(8089),rt=a(151),it=a(5589),ot=a(5869),st=a(481),dt=a(7518),ut=a.n(dt);I.render=E;const ct=I;ut()(I,"components",{QToolbar:X.Z,QBtn:Y.Z,QToolbarTitle:tt.Z,QSelect:et.Z,QInput:at.Z,QIcon:lt.Z,QTable:nt.Z,QCard:rt.Z,QCardSection:it.Z,QSeparator:ot.Z,QMarkupTable:st.Z});const mt={components:{GhhDetailsGrid:ct},props:{gemeinde:String,gkz:String,gemeinden_name:String,va_ra:String,finanzjahr:String,quartal:String,periode:String,nva:String,vrv:String,gemeinde_berichte_name:String,bestandteil:String,vrv_bestandteile_name:String},setup(t){let e=[],a="",l="";switch(t.bestandteil){case"ergebnishaushalt":e=[{name:"ansatz",label:"Ansatz",field:"ansatz_plus_text",align:"left",required:!0,sortable:!0},{name:"konto",label:"Konto",field:"konto_plus_text",align:"left",required:!0,sortable:!0},{name:"wert",label:"Wert",field:"wert",align:"right",sortable:!0,format:t=>parseFloat(t).toLocaleString("de-DE",{minimumFractionDigits:2,useGrouping:!0})},{name:"wert_fj0",label:"Wert Folgejahr",field:"wert_fj0",align:"right",sortable:!0,format:t=>parseFloat(t).toLocaleString("de-DE",{minimumFractionDigits:2,useGrouping:!0})}],a="ehh_details",l="mvag_ehh";break;case"finanzierungshaushalt":e=[{name:"ansatz",label:"Ansatz",field:"ansatz_text",align:"left",required:!0,sortable:!0},{name:"konto",label:"Konto",field:"konto_text",align:"left",required:!0,sortable:!0},{name:"wert",label:"Wert",field:"wert",align:"right",sortable:!0,format:t=>parseFloat(t).toLocaleString("de-DE",{minimumFractionDigits:2,useGrouping:!0})},{name:"wert_fj0",label:"Wert Folgejahr",field:"wert_fj0",align:"right",sortable:!0,format:t=>parseFloat(t).toLocaleString("de-DE",{minimumFractionDigits:2,useGrouping:!0})}],a="fhh_details",l="mvag_fhh";break;case"vermoegenshaushalt":e=[{name:"mvag",label:"MVAG",field:"mvag_text",align:"left",required:!0,sortable:!0},{name:"ansatz",label:"Ansatz",field:"ansatz_text",align:"left",required:!0,sortable:!0},{name:"konto",label:"Konto",field:"konto_text",align:"left",required:!0,sortable:!0},{name:"endstand_vj",label:"Wert 01.01.",field:"endstand_vj",align:"right",sortable:!0,format:t=>parseFloat(t).toLocaleString("de-DE",{minimumFractionDigits:2,useGrouping:!0})},{name:"endstand_rj",label:"Wert 31.12.",field:"endstand_rj",align:"right",sortable:!0,format:t=>parseFloat(t).toLocaleString("de-DE",{minimumFractionDigits:2,useGrouping:!0})}],a="vhh_details",l="mvag_vhh"}return{columns:e,detailUrl:a,mvagUrl:l}}};var gt=a(4379);mt.render=n;const wt=mt;ut()(mt,"components",{QPage:gt.Z})}}]);