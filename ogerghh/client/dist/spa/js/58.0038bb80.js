(self["webpackChunkghh_navi"]=self["webpackChunkghh_navi"]||[]).push([[58],{6878:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var l=a(52),n=a.n(l),r=a(6584);const i=n().create({baseURL:(0,r.MT)(),timeout:2500}),s=i},9058:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ve});var l=a(3673);function n(e,t,a,n,r,i){const s=(0,l.up)("GhhDetailsGrid"),o=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(o,null,{default:(0,l.w5)((()=>[(0,l.Wm)(s,(0,l.dG)(e.$props,{columns:n.columns,detailUrl:n.detailUrl,mvagUrl:n.mvagUrl}),null,16,["columns","detailUrl","mvagUrl"])])),_:1})}var r=a(2323),i=a(8880);const s={class:"row q-gutter-md"},o={class:"q-pa-xs col-xs-12 col-sm-12col-md-12"},d={class:"text-left",style:{width:"5%"}},u={class:"text-left",style:{width:"30%"}},c={class:"text-left",style:{width:"30%"}},m={class:"text-right",style:{width:"10%"}},w={class:"text-right",style:{width:"10%"}},g={class:"text-right",style:{width:"10%"}},v={colspan:"6"},f=(0,l.Wm)("td",{class:"text-left"},"Finanzjahr",-1),h={class:"text-right"},p={class:"text-right"},b={class:"text-right"},_={class:"text-right"},x={class:"text-right"},z={class:"text-right"},W=(0,l.Wm)("td",{class:"text-left"},"Rechnungsabschluss",-1),S={class:"text-right"},y={class:"text-right"},V={class:"text-right"},j={class:"text-right"},k={class:"text-right"},A={class:"text-right"},U=(0,l.Wm)("td",{class:"text-left"},"Voranschlag",-1),q={class:"text-right"},T={class:"text-right"},F={class:"text-right"},O={class:"text-right"},C={class:"text-right"},Z={class:"text-right"},K={colspan:"6"},H={class:"text-left"},$={class:"text-left"},M={class:"text-left"},Q={class:"text-left"},P={class:"text-left"},R={class:"text-left"},G={class:"text-left"},L={class:"text-left"},N={class:"text-left"},D=(0,l.Wm)("td",{class:"text-left"},"Â ",-1);function J(e,t,a,n,J,B){const I=(0,l.up)("q-btn"),E=(0,l.up)("q-toolbar-title"),X=(0,l.up)("q-toolbar"),Y=(0,l.up)("q-select"),ee=(0,l.up)("q-icon"),te=(0,l.up)("q-input"),ae=(0,l.up)("q-markup-table"),le=(0,l.up)("q-table");return(0,l.wg)(),(0,l.j4)("div",null,[(0,l.Wm)(X,{class:"bg-primary text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{flat:"",dense:"",round:"",fab:"",icon:"arrow_back",onClick:t[1]||(t[1]=t=>e.$router.back())}),(0,l.Wm)(E,{class:"text-center"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.mainTitle),1)])),_:1})])),_:1}),(0,l.Wm)("div",s,[(0,l.Wm)(Y,{grid:"",filled:"",clearable:"","use-input":"",modelValue:e.selectAnsatzValue,"onUpdate:modelValue":[t[2]||(t[2]=t=>e.selectAnsatzValue=t),e.onSelectAnsatzUpdate],label:"Ansatzfilter",options:e.selectAnsatzOptions,onFilter:e.onSelectAnsatzFilter,style:{width:"250px"}},null,8,["modelValue","options","onFilter","onUpdate:modelValue"]),(0,l.Wm)(Y,{filled:"",clearable:"","use-input":"",modelValue:e.selectKontoValue,"onUpdate:modelValue":[t[3]||(t[3]=t=>e.selectKontoValue=t),e.onSelectKontoUpdate],label:"Kontofilter",options:e.selectKontoOptions,onFilter:e.onSelectKontoFilter,style:{width:"250px"}},null,8,["modelValue","options","onFilter","onUpdate:modelValue"]),(0,l.Wm)(Y,{filled:"",clearable:"","use-input":"",modelValue:e.selectMvagValue,"onUpdate:modelValue":[t[4]||(t[4]=t=>e.selectMvagValue=t),e.onSelectMvagUpdate],label:"MVAG-Filter",options:e.selectMvagOptions,onFilter:e.onSelectMvagFilter,style:{width:"250px"}},null,8,["modelValue","options","onFilter","onUpdate:modelValue"]),(0,l.Wm)(te,{"bottom-slots":"",modelValue:e.filterText,"onUpdate:modelValue":t[7]||(t[7]=t=>e.filterText=t),label:"Textfilter",dense:"",onKeydown:t[8]||(t[8]=(0,i.D2)((0,i.iM)((t=>e.onFilterTextApply(e.filterText)),["prevent"]),["enter"])),filled:""},{append:(0,l.w5)((()=>[""!==e.filterText?((0,l.wg)(),(0,l.j4)(ee,{key:0,name:"close",onClick:t[5]||(t[5]=t=>e.filterText=""),class:"cursor-pointer"})):(0,l.kq)("",!0)])),after:(0,l.w5)((()=>[(0,l.Wm)(I,{round:"",dense:"",flat:"",icon:"send",onClick:t[6]||(t[6]=t=>e.onFilterTextApply(e.filterText))})])),_:1},8,["modelValue"]),(0,l.Wm)(Y,{filled:"",modelValue:e.selectSort,"onUpdate:modelValue":[t[9]||(t[9]=t=>e.selectSort=t),e.onSelectSort],"map-options":"",label:"Sortierung",options:[{label:"Ansatz, Konto",value:"ansatz"},{label:"Konto, Ansatz",value:"konto"}],style:{width:"200px"}},null,8,["modelValue","onUpdate:modelValue"])]),(0,l.Wm)(le,{grid:"","grid-header":"",dense:"",rows:e.tableData,columns:e.tableColumns,"row-key":"iid",filter:e.tableFilter,pagination:e.serverPagination,"onUpdate:pagination":t[10]||(t[10]=t=>e.serverPagination=t),onRequest:e.fetchRowsAndTotal,"binary-state-sort":""},{item:(0,l.w5)((t=>[(0,l.Wm)("div",o,[(0,l.Wm)(ae,{separator:"cell"},{default:(0,l.w5)((()=>[(0,l.Wm)("tbody",null,[(0,l.Wm)("tr",null,[(0,l.Wm)("td",d,[(0,l.Wm)(I,{round:"",dense:"",icon:-1===e.expanded1.indexOf(t.row.iid)?"add":"remove",onClick:a=>-1===e.expanded1.indexOf(t.row.iid)?e.expanded1.push(t.row.iid):e.expanded1.splice(e.expanded1.indexOf(t.row.iid),1)},null,8,["icon","onClick"])]),(0,l.Wm)("td",u,(0,r.zw)(t.row.ansatz_plus_text),1),(0,l.Wm)("td",c,(0,r.zw)(t.row.konto_plus_text),1),(0,l.Wm)("td",m,(0,r.zw)(t.row.wert1),1),(0,l.Wm)("td",w,(0,r.zw)(t.row.wert2),1),(0,l.Wm)("td",g,(0,r.zw)(t.row.wert3),1)]),(0,l.Wm)("tr",{hidden:-1===e.expanded1.indexOf(t.row.iid)},[(0,l.Wm)("td",v,[(0,l.Wm)(ae,null,{default:(0,l.w5)((()=>[(0,l.Wm)("tbody",null,[(0,l.Wm)("tr",null,[f,(0,l.Wm)("td",h,(0,r.zw)(t.row.finanzjahr),1),(0,l.Wm)("td",p,(0,r.zw)(t.row.finanzjahr-1),1),(0,l.Wm)("td",b,(0,r.zw)(t.row.finanzjahr-2),1),(0,l.Wm)("td",_,(0,r.zw)(t.row.finanzjahr-3),1),(0,l.Wm)("td",x,(0,r.zw)(t.row.finanzjahr-4),1),(0,l.Wm)("td",z,(0,r.zw)(t.row.finanzjahr-5),1)]),(0,l.Wm)("tr",null,[W,(0,l.Wm)("td",S,(0,r.zw)(t.row.wert_ra_vj0),1),(0,l.Wm)("td",y,(0,r.zw)(t.row.wert_ra_vj1),1),(0,l.Wm)("td",V,(0,r.zw)(t.row.wert_ra_vj2),1),(0,l.Wm)("td",j,(0,r.zw)(t.row.wert_ra_vj3),1),(0,l.Wm)("td",k,(0,r.zw)(t.row.wert_ra_vj4),1),(0,l.Wm)("td",A,(0,r.zw)(t.row.wert_ra_vj5),1)]),(0,l.Wm)("tr",null,[U,(0,l.Wm)("td",q,(0,r.zw)(t.row.wert_va_vj0),1),(0,l.Wm)("td",T,(0,r.zw)(t.row.wert_va_vj1),1),(0,l.Wm)("td",F,(0,r.zw)(t.row.wert_va_vj2),1),(0,l.Wm)("td",O,(0,r.zw)(t.row.wert_va_vj3),1),(0,l.Wm)("td",C,(0,r.zw)(t.row.wert_va_vj4),1),(0,l.Wm)("td",Z,(0,r.zw)(t.row.wert_va_vj5),1)])])])),_:2},1024)])],8,["hidden"]),(0,l.Wm)("tr",{hidden:-1===e.expanded1.indexOf(t.row.iid)},[(0,l.Wm)("td",K,[(0,l.Wm)(ae,null,{default:(0,l.w5)((()=>[(0,l.Wm)("tbody",null,[(0,l.Wm)("tr",null,[(0,l.Wm)("td",H,(0,r.zw)(t.row.ansatz1_plus_text),1),(0,l.Wm)("td",$,(0,r.zw)(t.row.konto1_plus_text),1),(0,l.Wm)("td",M,(0,r.zw)(t.row.mvag1_plus_text),1)]),(0,l.Wm)("tr",null,[(0,l.Wm)("td",Q,(0,r.zw)(t.row.ansatz2_plus_text),1),(0,l.Wm)("td",P,(0,r.zw)(t.row.konto2_plus_text),1),(0,l.Wm)("td",R,(0,r.zw)(t.row.mvag2_plus_text),1)]),(0,l.Wm)("tr",null,[(0,l.Wm)("td",G,(0,r.zw)(t.row.ansatz3_plus_text),1),(0,l.Wm)("td",L,(0,r.zw)(t.row.konto3_plus_text),1),(0,l.Wm)("td",N,(0,r.zw)(t.row.id_xhh),1),D])])])),_:2},1024)])],8,["hidden"])])])),_:2},1024)])])),_:1},8,["rows","columns","filter","pagination","onRequest"])])}a(7098),a(71);var B=a(1959),I=a(6878),E=a(6584);const X=(0,l.aZ)({name:"GhhDetailsGrid",props:{gemeinde:String,gkz:String,gemeinden_name:String,va_ra:String,finanzjahr:String,quartal:String,periode:String,nva:String,vrv:String,gemeinde_berichte_name:String,bestandteil:String,vrv_bestandteile_name:String,columns:Array,detailUrl:String,mvagUrl:String},setup(e){const t=(0,B.iH)(`${e.gemeinden_name} / ${e.gemeinde_berichte_name} / ${e.vrv_bestandteile_name}`),a=(0,B.iH)([]),n=(0,B.iH)(""),r=(0,B.iH)(!1),i=(0,B.iH)({sortBy:"",descending:!1,page:1,rowsPerPage:30,rowsNumber:1});async function s(t){const{page:l,rowsPerPage:n,sortBy:s,descending:d}=t.pagination,u=(0,E.Rw)(t);u.baseFilter={gkz:e.gkz,va_ra:e.va_ra,finanzjahr:e.finanzjahr,quartal:e.quartal,nva:e.nva,vrv:e.vrv},u.filter={mvag:o.value?o.value.value:void 0,ansatz:w.value?w.value.value:void 0,konto:p.value?p.value.value:void 0,filterText:y.value?y.value:void 0},u.sort=[[j.value.value,"ASC"]];try{r.value=!0;const{data:t}=await I.Z.post(`api/navi/${e.detailUrl}`,u);a.value=t.rows,i.value.rowsNumber=t.total}catch(c){(0,E.s3)(c)}i.value.page=l,i.value.rowsPerPage=n,i.value.sortBy=s,i.value.descending=d,r.value=!1}(0,l.bv)((()=>{s({pagination:i.value})}));const o=(0,B.iH)(null),d=(0,B.iH)(null);let u=null;async function c(t,a,l){if(null!==u)a((()=>{const e=t.toLowerCase();d.value=u.filter((t=>t.label.toLowerCase().indexOf(e)>-1))}));else try{const{data:t}=await I.Z.post(`api/navi/select_${e.mvagUrl}`,{vrv:e.vrv});a((()=>{d.value=t.rows,u=[...t.rows]}))}catch(n){l(),(0,E.s3)(n)}}async function m(e){n.value="mvag: "+JSON.stringify(e)}const w=(0,B.iH)(null),g=(0,B.iH)(null);let v=null;async function f(t,a,l){if(null!==v)a((()=>{const e=t.toLowerCase();g.value=v.filter((t=>t.label.toLowerCase().indexOf(e)>-1))}));else try{const{data:t}=await I.Z.post("api/navi/select_ansatz",{vrv:e.vrv});a((()=>{g.value=t.rows,v=[...t.rows]}))}catch(n){l(),(0,E.s3)(n)}}async function h(e){n.value="ansatz: "+JSON.stringify(e)}const p=(0,B.iH)(null),b=(0,B.iH)(null);let _=null;async function x(t,a,l){if(null!==_)a((()=>{const e=t.toLowerCase();b.value=_.filter((t=>t.label.toLowerCase().indexOf(e)>-1))}));else try{const{data:t}=await I.Z.post("api/navi/select_konto",{vrv:e.vrv});a((()=>{b.value=t.rows,_=[...t.rows]}))}catch(n){l(),(0,E.s3)(n)}}async function z(e){n.value="konto: "+JSON.stringify(e)}const W=(0,B.iH)([]),S=(0,B.iH)([]),y=(0,B.iH)("");async function V(e){n.value="text: "+JSON.stringify(e)}const j=(0,B.iH)("ansatz");async function k(e){n.value="sort: "+JSON.stringify(e)}return{mainTitle:t,loading:r,serverPagination:i,tableColumns:e.columns,tableData:a,fetchRowsAndTotal:s,tableFilter:n,selectMvagValue:o,selectMvagOptions:d,onSelectMvagFilter:c,onSelectMvagUpdate:m,selectAnsatzValue:w,selectAnsatzOptions:g,onSelectAnsatzFilter:f,onSelectAnsatzUpdate:h,selectKontoValue:p,selectKontoOptions:b,onSelectKontoFilter:x,onSelectKontoUpdate:z,expanded1:W,expanded2:S,filterText:y,onFilterTextApply:V,selectSort:j,onSelectSort:k}}});var Y=a(9570),ee=a(8240),te=a(3747),ae=a(4157),le=a(4842),ne=a(4554),re=a(8089),ie=a(151),se=a(5589),oe=a(5869),de=a(481),ue=a(7518),ce=a.n(ue);X.render=J;const me=X;ce()(X,"components",{QToolbar:Y.Z,QBtn:ee.Z,QToolbarTitle:te.Z,QSelect:ae.Z,QInput:le.Z,QIcon:ne.Z,QTable:re.Z,QCard:ie.Z,QCardSection:se.Z,QSeparator:oe.Z,QMarkupTable:de.Z});const we={components:{GhhDetailsGrid:me},props:{gemeinde:String,gkz:String,gemeinden_name:String,va_ra:String,finanzjahr:String,quartal:String,periode:String,nva:String,vrv:String,gemeinde_berichte_name:String,bestandteil:String,vrv_bestandteile_name:String},setup(e){let t=[],a="",l="";switch(e.bestandteil){case"ergebnishaushalt":t=[{name:"dummy1",label:"[x]",field:"",align:"left",required:!1,sortable:!1},{name:"ansatz",label:"Ansatz",field:"ansatz_plus_text",align:"left",required:!0,sortable:!1},{name:"konto",label:"Konto",field:"konto_plus_text",align:"left",required:!0,sortable:!1}],"VA"===e.va_ra?t=t.concat([{name:"wert1",label:`Voranschlag ${e.finanzjahr}`,field:"wert1",align:"right",sortable:!1},{name:"wert2",label:"Voranschlag "+(e.finanzjahr-1),field:"wert2",align:"right",sortable:!1},{name:"wert3",label:"Abschluss "+(e.finanzjahr-2),field:"wert3",align:"right",sortable:!1}]):"RA"===e.va_ra&&(t=t.concat([{name:"wert1",label:`Abschluss ${e.finanzjahr}`,field:"wert1",align:"right",sortable:!1},{name:"wert2",label:`Voranschlag ${e.finanzjahr}`,align:"right",sortable:!1},{name:"wert3",label:"Abweichung",field:"wert3",align:"right",sortable:!1}])),a="ehh_details",l="mvag_ehh";break;case"finanzierungshaushalt":t=[{name:"dummy1",label:"[x]",field:"",align:"left",required:!1,sortable:!1},{name:"ansatz",label:"Ansatz",field:"ansatz_plus_text",align:"left",required:!0,sortable:!1},{name:"konto",label:"Konto",field:"konto_plus_text",align:"left",required:!0,sortable:!1}],"VA"===e.va_ra?t=t.concat([{name:"wert1",label:`Voranschlag ${e.finanzjahr}`,field:"wert1",align:"right",sortable:!1},{name:"wert2",label:"Voranschlag "+(e.finanzjahr-1),field:"wert2",align:"right",sortable:!1},{name:"wert3",label:"Abschluss "+(e.finanzjahr-2),field:"wert3",align:"right",sortable:!1}]):"RA"===e.va_ra&&(t=t.concat([{name:"wert1",label:`Abschluss ${e.finanzjahr}`,field:"wert1",align:"right",sortable:!1},{name:"wert2",label:`Voranschlag ${e.finanzjahr}`,align:"right",sortable:!1},{name:"wert3",label:"Abweichung",field:"wert3",align:"right",sortable:!1}])),a="fhh_details",l="mvag_fhh";break;case"vermoegenshaushalt":t=[{name:"dummy1",label:"[x]",field:"",align:"left",required:!1,sortable:!1},{name:"ansatz",label:"Ansatz",field:"ansatz_plus_text",align:"left",required:!0,sortable:!1},{name:"konto",label:"Konto",field:"konto_plus_text",align:"left",required:!0,sortable:!1},{name:"wert1",label:`Wert 01.01.${e.finanzjahr}`,field:"wert1",align:"right",sortable:!1},{name:"wert2",label:`Wert 31.12.${e.finanzjahr}`,field:"wert2",align:"right",sortable:!1},{name:"wert3",label:"VerÃ¤nderung",field:"wert3",align:"right",sortable:!1}],a="vhh_details",l="mvag_vhh"}return{columns:t,detailUrl:a,mvagUrl:l}}};var ge=a(4379);we.render=n;const ve=we;ce()(we,"components",{QPage:ge.Z})}}]);